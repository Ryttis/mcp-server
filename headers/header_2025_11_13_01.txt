Prompt Header â€” MCP Server (v1.0)

Date: 2025-11-13
Project Path: /Users/Ryttis/mcp-server
Environment: Node.js v24.10.0 Â· WS Server : ws://localhost:4000
Auth Token: secret123

ğŸ§© Context Summary

Rytis is building a Modular Context Protocol (MCP) server in Node.js that serves as a local AI bridge for multiple development projects (Etno Lentos, FacturaCore, etc.).

The MCP server communicates via WebSocket JSON-RPC and dynamically loads tools from the /tools directory.
Each project now has its own namespace under /tools (core/, etno/, factura/) for clear separation.

ğŸ“‚ Current Project Structure
mcp-server/
â”œâ”€â”€ server.js              # Core WebSocket server, dynamic tool loader
â”œâ”€â”€ bridge.js              # Bridge to OpenAI / external APIs
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ core/              # Shared, project-agnostic tools
â”‚   â”‚   â”œâ”€â”€ analyzeGcode.js
â”‚   â”‚   â”œâ”€â”€ cache.js, checkBilling.js, dbQuery.js
â”‚   â”‚   â”œâ”€â”€ getTime.js, listDir.js, logParse.js, logSummarize.js
â”‚   â”‚   â”œâ”€â”€ ping.js, readFile.js, readProjectFile.js
â”‚   â”‚   â”œâ”€â”€ runCommand.js, writeFile.js
â”‚   â”œâ”€â”€ etno/              # Etno Lentos namespace
â”‚   â”‚   â”œâ”€â”€ listDir.js
â”‚   â”‚   â”œâ”€â”€ parseMaterial.js
â”‚   â”‚   â”œâ”€â”€ readFile.js
â”‚   â”‚   â””â”€â”€ summarizeFile.js
â”‚   â””â”€â”€ factura/           # FacturaCore namespace
â”‚       â””â”€â”€ readFile.js
â”œâ”€â”€ logs/test.log
â”œâ”€â”€ integrations/
â”œâ”€â”€ package.json
â”œâ”€â”€ .env                   # includes AUTH_TOKEN, ETNOLENTOS_PATH, FACTURACORE_PATH
â””â”€â”€ headers/               # (new) stores session snapshots

âš™ï¸ Loaded Tools (as of last run)
[
  'core_analyzeGcode', 'core_cache', 'core_checkBilling', 'core_dbQuery',
  'core_getTime', 'core_listDir', 'core_logParse', 'core_logSummarize',
  'core_ping', 'core_readFile', 'core_readProjectFile', 'core_runCommand',
  'core_writeFile', 'etno_listDir', 'etno_parseMaterial', 'etno_readFile',
  'etno_summarizeFile', 'factura_readFile'
]
âœ… All core, Etno, and Factura tools are recognized and callable via JSON-RPC.

ğŸ§  Current State

âœ… Namespacing architecture implemented (core_, etno_, factura_)

âœ… Duplicate readFile name conflict resolved

âœ… Loader now recursively scans subdirectories and prefixes namespace

âœ… Server runs clean with no syntax or path errors

âœ… Each namespace has its own workspace path from .env

ğŸ¯ Next Steps (Phase 2)

Daemon Autosave Mode

Implement background snapshotServer() â†’ writes /headers/latest.md every 5 min.

Append execution log lines to .ai/context.md.

Etno Lentos Integration

Continue workflow from image â†’ SVG â†’ G-code (vector-only).

Use core_analyzeGcode + etno_parseMaterial for material-specific preview.

FacturaCore Integration

Add factura_listDir.js and factura_summarizeFile.js.

Connect to /Users/Ryttis/code/facturacore.

Header Automation

Optional tools/core/saveHeader.js to auto-export this summary.

âœ… End-of-Day State

MCP Server 0.3 ready â€” stable architecture, modular tools loaded, environment confirmed, context saved.
Next session begins with autosave implementation and Etno Lentos pipeline continuatio

